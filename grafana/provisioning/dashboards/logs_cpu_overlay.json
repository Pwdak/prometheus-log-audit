{
  "title": "Logs vs CPU Overlay",
  "timezone": "browser",
  "schemaVersion": 36,
  "version": 1,
  "time": { "from": "now-6h", "to": "now" },
  "panels": [
    {
      "type": "timeseries",
      "title": "Logs vs CPU (overlay)",
      "datasource": "Prometheus",
      "targets": [
        {
          "refId": "A",
          "expr": "100 - (avg(rate(node_cpu_seconds_total{mode=\"idle\"}[5m])) * 100)"
        },
        {
          "refId": "B",
          "datasource": "Loki",
          "expr": "sum(rate({job=\"webapp\"}[5m])) * 60"
        }
      ],
      "fieldConfig": {
        "defaults": { "custom": { "lineWidth": 2 } },
        "overrides": [
          {
            "matcher": { "id": "byFrameRefID", "options": "A" },
            "properties": [
              { "id": "unit", "value": "percent" },
              { "id": "custom.axisPlacement", "value": "left" }
            ]
          },
          {
            "matcher": { "id": "byFrameRefID", "options": "B" },
            "properties": [
              { "id": "unit", "value": "logs/min" },
              { "id": "custom.axisPlacement", "value": "right" }
            ]
          }
        ]
      },
      "options": { "legend": { "displayMode": "list" } },
      "gridPos": { "h": 9, "w": 24, "x": 0, "y": 0 }
    }
  ]
}
